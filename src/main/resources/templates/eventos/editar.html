<!DOCTYPE html>
<html lang="pt-BR">
  <th:block
    th:replace="fragments/head :: head('Editar evento | Partiu!')"
  ></th:block>

  <body>
    <th:block th:replace="fragments/header :: header"></th:block>

    <main class="max-w-96 mx-auto space-y-6 py-12">
      <hgroup class="space-y-3">
        <h1 class="text-center font-semibold text-2xl">Editar evento</h1>

        <p class="text-neutral-500 text-center text-balance">
          Atualize as informações do evento.
        </p>
      </hgroup>

      <form
        class="flex flex-col gap-4"
        th:action="@{'/eventos/editar/' + ${evento.id}}"
        method="POST"
        enctype="multipart/form-data"
        th:object="${evento}"
      >
        <div class="flex flex-col gap-1">
          <label for="nome">
            Nome
            <span class="text-red-500">*</span>
          </label>

          <input
            class="border px-3 py-1.5 rounded-md"
            type="text"
            id="nome"
            name="nome"
            placeholder="Digite o nome do evento"
            required
            th:value="*{nome}"
          />

          <p
            th:if="${#fields.hasErrors('nome')}"
            th:errors="*{nome}"
            class="text-red-500 text-sm"
          ></p>
        </div>

        <div class="flex flex-col gap-1">
          <label for="descricao"> Descrição </label>

          <textarea
            class="border px-3 py-1.5 rounded-md"
            id="descricao"
            name="descricao"
            placeholder="Digite a descrição"
            rows="3"
            th:text="*{descricao}"
          ></textarea>

          <p
            th:if="${#fields.hasErrors('descricao')}"
            th:errors="*{descricao}"
            class="text-red-500 text-sm"
          ></p>
        </div>

        <div class="flex flex-col gap-1">
          <label for="categoria">
            Categoria
            <span class="text-red-500">*</span>
          </label>

          <select
            class="border px-3 py-1.5 rounded-md"
            id="categoria"
            name="categoria"
            required
          >
            <option value="">Selecione uma categoria</option>
            <option
              th:each="cat : ${categorias}"
              th:value="${cat}"
              th:text="${cat.displayName}"
              th:selected="${cat.name() == evento.categoria.name()}"
            ></option>
          </select>

          <p
            th:if="${#fields.hasErrors('categoria')}"
            th:errors="*{categoria}"
            class="text-red-500 text-sm"
          ></p>
        </div>

        <div class="flex flex-col gap-1">
          <label for="local">
            Local
            <span class="text-red-500">*</span>
          </label>

          <select
            class="border px-3 py-1.5 rounded-md"
            id="local"
            name="local"
            required
          >
            <option value="">Selecione um local</option>
            <option
              th:each="loc : ${locais}"
              th:value="${loc.id}"
              th:text="${loc.nome}"
              th:selected="${loc.id == evento.local?.id}"
            ></option>
          </select>

          <p
            th:if="${#fields.hasErrors('local')}"
            th:errors="*{local}"
            class="text-red-500 text-sm"
          ></p>
        </div>

        <div class="flex flex-col gap-1">
          <label for="dataInicio">
            Data de Início
            <span class="text-red-500">*</span>
          </label>

          <input
            class="border px-3 py-1.5 rounded-md"
            type="datetime-local"
            id="dataInicio"
            name="dataInicio"
            required
            th:value="*{dataInicio != null ? #temporals.format(dataInicio, 'yyyy-MM-dd''T''HH:mm') : ''}"
          />

          <p
            th:if="${#fields.hasErrors('dataInicio')}"
            th:errors="*{dataInicio}"
            class="text-red-500 text-sm"
          ></p>
        </div>

        <div class="flex flex-col gap-1">
          <label for="dataFim">
            Data de Fim <span class="text-red-500">*</span>
          </label>

          <input
            class="border px-3 py-1.5 rounded-md"
            type="datetime-local"
            id="dataFim"
            name="dataFim"
            required
            th:value="*{dataFim != null ? #temporals.format(dataFim, 'yyyy-MM-dd''T''HH:mm') : ''}"
          />

          <p
            th:if="${#fields.hasErrors('dataFim')}"
            th:errors="*{dataFim}"
            class="text-red-500 text-sm"
          ></p>
        </div>

        <div class="flex flex-col gap-1">
          <label for="preco">
            Preço
            <span class="text-red-500">*</span>
          </label>

          <input
            class="border px-3 py-1.5 rounded-md"
            type="number"
            step="0.01"
            id="preco"
            name="preco"
            placeholder="Digite o preço (ex: 50.00)"
            required
            th:value="*{preco}"
          />

          <p
            th:if="${#fields.hasErrors('preco')}"
            th:errors="*{preco}"
            class="text-red-500 text-sm"
          ></p>
        </div>

        <div class="flex flex-col gap-1">
          <label for="idadeMinima"> Idade Mínima </label>

          <select
            class="border px-3 py-1.5 rounded-md"
            id="idadeMinima"
            name="idadeMinima"
          >
            <option value="">Livre</option>
            <option value="12" th:selected="${evento.idadeMinima == 12}">
              12 anos
            </option>
            <option value="14" th:selected="${evento.idadeMinima == 14}">
              14 anos
            </option>
            <option value="16" th:selected="${evento.idadeMinima == 16}">
              16 anos
            </option>
            <option value="18" th:selected="${evento.idadeMinima == 18}">
              18 anos
            </option>
            <option value="21" th:selected="${evento.idadeMinima == 21}">
              21 anos
            </option>
          </select>

          <p
            th:if="${#fields.hasErrors('idadeMinima')}"
            th:errors="*{idadeMinima}"
            class="text-red-500 text-sm"
          ></p>
        </div>

        <div class="flex flex-col gap-1">
          <label for="midias">Mídias (Imagens ou Vídeos)</label>

          <input
            class="border px-3 py-1.5 rounded-md"
            type="file"
            id="midias"
            name="midias"
            multiple
            accept="image/*,video/*"
          />

          <p class="text-sm text-gray-500">
            Selecione uma ou mais imagens ou vídeos (máx. 10MB cada)
          </p>
        </div>

        <div class="flex flex-col gap-1">
          <label for="status">
            Status
            <span class="text-red-500">*</span>
          </label>

          <select
            class="border px-3 py-1.5 rounded-md"
            id="status"
            name="status"
            required
          >
            <option value="">Selecione um status</option>
            <option
              th:each="st : ${statusList}"
              th:value="${st}"
              th:text="${st.displayName}"
              th:selected="${st == evento.status}"
            ></option>
          </select>

          <p
            th:if="${#fields.hasErrors('status')}"
            th:errors="*{status}"
            class="text-red-500 text-sm"
          ></p>
        </div>

        <button
          type="submit"
          class="h-10 bg-blue-500 px-4 py-1.5 rounded-md text-neutral-100 font-medium transition-colors hover:bg-blue-600 flex items-center justify-center"
        >
          Atualizar
        </button>
      </form>

      <form
        class="flex justify-center"
        th:action="@{'/eventos/excluir/' + ${evento.id}}"
      >
        <button
          class="text-red-500 text-sm flex justify-center items-center gap-2 hover:bg-red-100 rounded-md px-3 py-2 transition-colors cursor-pointer"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="lucide lucide-trash-icon lucide-trash size-4"
          >
            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6" />
            <path d="M3 6h18" />
            <path d="M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" />
          </svg>
          Excluir evento
        </button>
      </form>
    </main>
  </body>
</html>
