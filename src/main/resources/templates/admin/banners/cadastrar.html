<!DOCTYPE html>
<html lang="pt-BR">
  <th:block
    th:replace="fragments/head :: head('Adicionar Banner | Partiu!')"
  ></th:block>

  <body>
    <th:block th:replace="fragments/header :: header"></th:block>

    <main class="max-w-96 mx-auto space-y-6 py-12">
      <hgroup class="space-y-3">
        <h1 class="text-center font-semibold text-2xl">Adicionar Banner</h1>

        <p class="text-neutral-500 text-center text-balance">
          Adicione um novo banner promocional.
        </p>
      </hgroup>

      <form
        class="flex flex-col gap-4"
        th:action="@{/admin/banners/cadastrar}"
        method="POST"
        enctype="multipart/form-data"
      >
        <div class="flex flex-col gap-1">
          <label for="titulo">
            Título
            <span class="text-red-500">*</span>
          </label>

          <input
            class="border px-3 py-1.5 rounded-md"
            type="text"
            id="titulo"
            name="titulo"
            placeholder="Digite o título do banner"
            required
          />
        </div>

        <div class="flex flex-col gap-1">
          <label for="imagem">
            Imagem
            <span class="text-red-500">*</span>
          </label>

          <label
            for="imagem"
            id="imagem-preview-container"
            class="border border-dashed rounded-lg flex justify-center items-center aspect-video w-full cursor-pointer hover:bg-neutral-50 transition-colors overflow-hidden relative"
          >
            <div
              id="imagem-placeholder"
              class="flex flex-col items-center gap-2 text-neutral-400"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="1.5"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="lucide lucide-image-icon lucide-image size-8"
              >
                <rect width="18" height="18" x="3" y="3" rx="2" ry="2" />
                <circle cx="9" cy="9" r="2" />
                <path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21" />
              </svg>
              <span class="text-sm">Clique para selecionar</span>
            </div>
            <img
              id="imagem-preview"
              class="w-full h-full object-cover hidden"
            />
          </label>

          <input
            class="hidden"
            type="file"
            id="imagem"
            name="imagem"
            accept="image/*"
            required
            onchange="previewImage(this)"
          />

          <p class="text-sm text-neutral-500">
            Selecione uma imagem (máx. 10MB)
          </p>
        </div>

        <button
          type="submit"
          class="h-10 bg-blue-500 px-4 py-1.5 rounded-md text-neutral-100 font-medium transition-colors hover:bg-blue-600 flex items-center justify-center"
        >
          Adicionar Banner
        </button>
      </form>
    </main>

    <th:block th:replace="fragments/footer :: footer"></th:block>

    <script>
      function previewImage(input) {
        const preview = document.getElementById("imagem-preview");
        const placeholder = document.getElementById("imagem-placeholder");

        if (input.files && input.files[0]) {
          const reader = new FileReader();

          reader.onload = function (e) {
            preview.src = e.target.result;
            preview.classList.remove("hidden");
            placeholder.classList.add("hidden");
          };

          reader.readAsDataURL(input.files[0]);
        } else {
          preview.src = "";
          preview.classList.add("hidden");
          placeholder.classList.remove("hidden");
        }
      }
    </script>
  </body>
</html>
