<!DOCTYPE html>
<html lang="pt-BR">
  <th:block
    th:replace="fragments/head :: head('Gerenciar Banners | Partiu!')"
  ></th:block>

  <body>
    <th:block th:replace="fragments/header :: header"></th:block>

    <main class="max-w-4xl mx-auto space-y-6 py-12">
      <div
        th:if="${erro}"
        class="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md text-sm mb-10"
        role="alert"
      >
        <p th:text="${erro}"></p>
      </div>

      <div
        th:if="${mensagem}"
        class="bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-md text-sm mb-10"
        role="alert"
      >
        <p th:text="${mensagem}"></p>
      </div>

      <hgroup class="space-y-3">
        <h1 class="text-center font-semibold text-2xl">Banners</h1>

        <p class="text-neutral-500 text-center text-balance">
          Gerencie os banners promocionais.
        </p>
      </hgroup>

      <div class="overflow-x-auto" th:if="${not #lists.isEmpty(banners)}">
        <table class="min-w-full bg-white border border-gray-200">
          <thead class="bg-gray-50">
            <tr>
              <th
                class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
              >
                Imagem
              </th>
              <th
                class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
              >
                Título
              </th>
              <th
                class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
              >
                Criado em
              </th>
              <th
                class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
              >
                Ações
              </th>
            </tr>
          </thead>
          <tbody class="bg-white divide-y divide-gray-200">
            <tr th:each="banner : ${banners}">
              <td
                class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 min-w-56"
              >
                <img
                  th:src="${banner.url}"
                  th:alt="${banner.titulo}"
                  class="object-cover rounded aspect-video h-24"
                />
              </td>
              <td
                class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 w-full truncate"
                th:text="${banner.titulo}"
              ></td>
              <td
                class="px-6 py-4 whitespace-nowrap text-sm text-gray-500"
                th:text="${#temporals.format(banner.criadoEm, 'dd/MM/yyyy HH:mm')}"
              ></td>
              <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                <div class="flex items-center gap-2">
                  <form
                    th:action="@{'/admin/banners/excluir/' + ${banner.id}}"
                    method="post"
                    onsubmit="return confirm('Tem certeza que deseja remover este banner?')"
                  >
                    <button
                      type="submit"
                      class="text-red-600 hover:text-red-900 flex items-center gap-1.5"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="24"
                        height="24"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        class="lucide lucide-trash2-icon lucide-trash-2 size-4"
                      >
                        <path d="M10 11v6" />
                        <path d="M14 11v6" />
                        <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6" />
                        <path d="M3 6h18" />
                        <path d="M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" />
                      </svg>
                      <span class="sr-only">Remover</span>
                    </button>
                  </form>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <div
        th:if="${#lists.isEmpty(banners)}"
        class="flex flex-col gap-4 items-center py-12 px-4 border border-dashed rounded-md"
      >
        <p class="text-center text-gray-500 text-balance max-w-80">
          Nenhum banner cadastrado. Clique no botão abaixo para adicionar o
          primeiro.
        </p>

        <a
          th:href="@{/admin/banners/cadastrar}"
          class="bg-blue-500 px-4 py-2 rounded-md text-neutral-100 font-medium transition-colors hover:bg-blue-600"
        >
          Adicionar novo banner
        </a>
      </div>

      <a
        th:if="${not #lists.isEmpty(banners)}"
        th:href="@{/admin/banners/cadastrar}"
        class="bg-blue-500 px-4 py-2 rounded-md text-neutral-100 font-medium transition-colors hover:bg-blue-600"
      >
        Adicionar novo banner
      </a>
    </main>

    <th:block th:replace="fragments/footer :: footer"></th:block>
  </body>
</html>
